<!DOCTYPE html>
<html lang="ja">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
  <link rel="manifest" href="manifest.json">
  <title>SSD - ランダム盤面</title>
  
  <!-- Web フォントの読み込み -->
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <!-- 最も重要なフォントを優先的に読み込み -->
  <link href="https://fonts.googleapis.com/css2?family=Noto+Sans+JP:wght@400;700&display=swap" rel="stylesheet">
  <link href="https://fonts.googleapis.com/css2?family=JetBrains+Mono:wght@400;700&display=swap" rel="stylesheet">
  <link href="https://fonts.googleapis.com/css2?family=Orbitron:wght@400;700&display=swap" rel="stylesheet">
  
  <link rel="stylesheet" href="styles.css">
  <link rel="stylesheet" href="normal.css">
  <link rel="stylesheet" href="font-fallback.css">
  <link rel="stylesheet" href="threshold-styles.css">
  <link rel="icon" href="data:,">
</head>

<body>

  <!-- しきい値設定画面 -->
  <div class="threshold-settings" id="threshold-settings">
    <div class="threshold-container">
      <div class="threshold-title">THRESHOLD SETTINGS</div>
      <div class="threshold-subtitle">パターン切り替えポイントを設定</div>
      
      <div class="threshold-controls">
        <div class="threshold-control">
          <div class="threshold-label">EARLY</div>
          <div class="threshold-slider-container">
            <input type="range" class="threshold-slider" id="early-slider" 
                   min="10" max="150" step="5" value="35">
            <div class="threshold-value" id="early-value">35</div>
          </div>
        </div>
        
        <div class="threshold-control">
          <div class="threshold-label">MID</div>
          <div class="threshold-slider-container">
            <input type="range" class="threshold-slider" id="mid-slider" 
                   min="10" max="150" step="5" value="70">
            <div class="threshold-value" id="mid-value">70</div>
          </div>
        </div>
        
        <div class="threshold-control">
          <div class="threshold-label">HIGH</div>
          <div class="threshold-slider-container">
            <input type="range" class="threshold-slider" id="high-slider" 
                   min="10" max="150" step="5" value="105">
            <div class="threshold-value" id="high-value">105</div>
          </div>
        </div>
      </div>
      
      <div class="threshold-error" id="threshold-error" style="display: none;">
        エラー: EARLY < MID < HIGH の順序で設定してください
      </div>
      
             <div class="threshold-buttons">
               <button class="threshold-button ok" id="threshold-ok">OK</button>
             </div>
    </div>
  </div>

  <div class="container" id="game-container" style="display: none;">
    <!-- セクション1: 15% - 統一されたフューチャーディスプレイ -->
    <div class="section-1">
      <div class="futuristic-display">
        <div class="timer-display">
          <div class="timer-label">TIME</div>
          <div class="timer-value" id="system-timer">00:00:00</div>
        </div>
        <div class="position-display">
          <div class="position-label">SPACE</div>
          <div class="position-value" id="position-info">STANDBY</div>
        </div>
        <div class="hits-display">
          <div class="hits-label">HITS</div>
          <div class="hits-value" id="hit-counter">000</div>
        </div>
      </div>
    </div>

    <!-- セクション2: パターン表示エリア -->
    <div class="section-2">
      <div class="pattern-display" id="pattern-display">
        <div class="pattern-roulette" id="pattern-roulette">
          <div class="pattern-text" id="pattern-text">PATTERN ANALYSIS</div>
        </div>
      </div>
    </div>

    <!-- セクション7: 新しいセクション -->
    <div class="section-7">
      <div class="event-display" id="event-display">
        <div class="event-text" id="event-text">SYSTEM READY</div>
      </div>
    </div>

    <!-- セクション4: ノーツレーン -->
     
    <div class="section-4 notes-lane" id="game-area">
       <div id="floating-pattern-text" class="floating-pattern-text" style="display:none;"></div>
      <div class="judgeline"></div>
      <div class="section-4-text" id="section-4-text"></div>
    </div>
    

    <!-- セクション3: すごろく盤 -->
    <div class="section-3">
      <div class="sugoroku-container" id="sugoroku-container">
        <div class="sugoroku-board" id="sugoroku-board">
          <!-- マスは動的に生成される -->
        </div>
        <!-- 光る線は動的に生成される -->
        <div class="piece" id="piece"></div>
        <!-- 浮き上がるノーツ内容表示用 -->
      </div>
    </div>

    <!-- セクション5: 75% - 3つのボタン（上段） -->
    <div class="section-5">
      
      <div class="button-third center disabled" id="number-predict-button">
        <div class="number-display-large" id="predict-number">1</div>
        <div class="indicator-container">
          <div class="indicator active" data-index="0"></div>
          <div class="indicator" data-index="1"></div>
          <div class="indicator" data-index="2"></div>
        </div>
      </div>
      <div class="button-third right skip-button" id="skip-button">
        <div class="skip-icon-large">
          <div class="skip-triangle-large"></div>
          <div class="skip-triangle-large"></div>
        </div>
        <div class="indicator-container">
          <div class="indicator active" data-index="0"></div>
          <div class="indicator" data-index="1"></div>
          <div class="indicator" data-index="2"></div>
        </div>
      </div>
      <div class="button-third left control-matrix-button" id="control-matrix">
        <div class="stop-icon-large">■</div>
        <div class="indicator-container">
          <div class="indicator active" data-index="0"></div>
          <div class="indicator" data-index="1"></div>
          <div class="indicator" data-index="2"></div>
        </div>
      </div>
    </div>

    <!-- セクション6: 残り - ダイスボタンのみ（下段） -->
    <div class="section-6">
      <div class="dice-button-full" id="dice-button">
        <div class="dice-container-2d" id="dice-container">
          <div class="dice-2d" id="dice">
            <div class="dice-dots face-1" id="dice-display">
              <div class="dot"></div>
              <div class="dot"></div>
              <div class="dot"></div>
              <div class="dot"></div>
              <div class="dot"></div>
              <div class="dot"></div>
              <div class="dot"></div>
              <div class="dot"></div>
              <div class="dot"></div>
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>

  <audio id="hit" src="hit.mp3" preload="auto"></audio>

  <!-- コアファイル読み込み -->
   <script src="difficulty-config.js"></script>
   <script src="difficulty-manager.js"></script>
   <script src="threshold-manager.js"></script>
   <script src="Config.js"></script>
   <script src="Bottom.js"></script>
   <script src="Board.js"></script>
   <script src="Dice.js"></script>
     <script src="Note.js"></script>
      <script src="Text.js"></script>
  <script src="font-manager.js"></script>
  <script src="bug-system.js"></script>
  <script src="main.js"></script>
  <!-- ランダム盤面モード読み込み -->
  <script src="board-random.js"></script>

  <script>
    if ('serviceWorker' in navigator) {
      window.addEventListener('load', function () {
        navigator.serviceWorker.register('/SSD/sw.js').then(function (registration) {

        }, function (err) {

        });
      });
    }
  </script>

</body>
</html>